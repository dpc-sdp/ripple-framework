<script setup lang="ts">
import { computed } from 'vue'
import { isExternalLink } from '../../lib/helpers'

interface Props {
  url: string
}

const props = defineProps<Props>()

const isExternal = computed(() => isExternalLink(props.url))
</script>

<template>
  <figure
    :class="{ 'rpl-document': true, 'rpl-document--centered': !$slots.info }"
  >
    <a
      tabindex="-1"
      class="rpl-document__link"
      :href="url"
      :download="isExternal ? null : ''"
      :target="isExternal ? '_blank' : null"
    >
      <div v-if="$slots.icon" class="rpl-document__icon">
        <slot name="icon"></slot>
      </div>
      <div class="rpl-document__content">
        <div
          v-if="$slots.name"
          class="rpl-document__name rpl-type-p rpl-type-weight-bold rpl-u-focusable-inline"
          tabindex="0"
        >
          <slot name="name"></slot>
        </div>
        <div v-if="$slots.info" class="rpl-document__info rpl-type-label-small">
          <slot name="info"></slot>
        </div>
      </div>
    </a>
    <figcaption
      v-if="$slots.caption"
      class="rpl-document__caption rpl-type-p-small"
    >
      <slot name="caption"></slot>
    </figcaption>
  </figure>
</template>
